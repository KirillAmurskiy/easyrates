<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="808px" preserveAspectRatio="none" style="width:892px;height:808px;" version="1.1" viewBox="0 0 892 808" width="892px" zoomAndPan="magnify"><defs><filter height="300%" id="f1oakgqrsrgljs" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="4.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="8.0" dy="8.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="436" cy="36" fill="#000000" filter="url(#f1oakgqrsrgljs)" rx="20" ry="20" style="stroke: none; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" height="70.1875" rx="25" ry="25" style="stroke: #A80036; stroke-width: 3.0;" width="138" x="367" y="138"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="98" x="387" y="182.9141">(from, to)</text><polygon fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" points="436,301,460,325,436,349,412,325,436,301" style="stroke: #A80036; stroke-width: 3.0;"/><rect fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" height="70.1875" rx="25" ry="25" style="stroke: #A80036; stroke-width: 3.0;" width="316" x="12" y="290"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="276" x="32" y="334.9141">rate = cache.Get(from, to)</text><rect fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" height="70.1875" rx="25" ry="25" style="stroke: #A80036; stroke-width: 3.0;" width="152" x="280" y="594"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="112" x="300" y="638.9141">return rate</text><rect fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" height="70.1875" rx="25" ry="25" style="stroke: #A80036; stroke-width: 3.0;" width="284" x="530" y="290"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="244" x="550" y="334.9141">rate = DB.Get(from, to)</text><rect fill="#FEFECE" filter="url(#f1oakgqrsrgljs)" height="70.1875" rx="25" ry="25" style="stroke: #A80036; stroke-width: 3.0;" width="530" x="341" y="442"/><text fill="#000000" font-family="sans-serif" font-size="24" lengthAdjust="spacingAndGlyphs" textLength="490" x="361" y="486.9141">cache.Add(from, to, rate, rate.ExpirationTime)</text><ellipse cx="356" cy="766" fill="none" filter="url(#f1oakgqrsrgljs)" rx="20" ry="20" style="stroke: #000000; stroke-width: 2.0;"/><ellipse cx="357" cy="767" fill="#000000" rx="12" ry="12" style="stroke: none; stroke-width: 2.0;"/><!--MD5=[ff95ef39bef8f5e5fc5941f64910a15a]
link start to (from, to)--><path d="M436,56.494 C436,74.854 436,103.672 436,127.802 " fill="none" id="start-&gt;(from, to)" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="436,137.814,444,119.814,436,127.814,428,119.814,436,137.814" style="stroke: #A80036; stroke-width: 2.0;"/><!--MD5=[6dd456175ae61c85cb93721a64d3a663]
link (from, to) to #7379--><path d="M436,208.584 C436,232.842 436,265.46 436,289.662 " fill="none" id="(from, to)-&gt;#7379" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="436,300.128,444,282.128,436,290.128,428,282.128,436,300.128" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="482.5718" y="241.4473">(from, to)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="170" x="442.5718" y="269.1192">contains in cache</text><!--MD5=[b2eea1dca630ce9c81dd8395706e4a26]
reverse link rate = cache.Get(from, to) to #7379--><path d="M339.148,325 C367.584,325 393.634,325 411.538,325 " fill="none" id="rate = cache.Get(from, to)&lt;-#7379" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="328.574,325,346.574,333,338.574,325,346.574,317,328.574,325" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="40" x="350" y="313.8379">Yes</text><!--MD5=[83d353a947e17c86fe5f24c934f17797]
link rate = cache.Get(from, to) to return rate--><path d="M190.616,360.252 C224.694,415.214 292.702,524.908 330.016,585.092 " fill="none" id="rate = cache.Get(from, to)-&gt;return rate" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="335.292,593.5996,332.6038,574.0862,330.0215,585.1012,319.0065,582.5189,335.292,593.5996" style="stroke: #A80036; stroke-width: 2.0;"/><!--MD5=[dd1d6a2ecff2e851cc227b19cc49fc33]
link #7379 to rate = DB.Get(from, to)--><path d="M460.368,325 C475.482,325 496.318,325 519.056,325 " fill="none" id="#7379-&gt;rate = DB.Get(from, to)" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="529.624,325,511.624,317,519.624,325,511.624,333,529.624,325" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="26" x="482" y="313.8379">No</text><!--MD5=[81792479994da91028e43892a2cabdba]
link rate = DB.Get(from, to) to cache.Add(from, to, rate, rate.ExpirationTime)--><path d="M657.024,360.584 C647.572,381.776 635.276,409.35 625.122,432.118 " fill="none" id="rate = DB.Get(from, to)-&gt;cache.Add(from, to, rate, rate.ExpirationTime)" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="620.918,441.55,635.5581,428.3717,624.9926,432.4178,620.9466,421.8523,620.918,441.55" style="stroke: #A80036; stroke-width: 2.0;"/><!--MD5=[3d49776d3d58daa15f0c5f9fdf08d901]
link cache.Add(from, to, rate, rate.ExpirationTime) to return rate--><path d="M549.896,512.214 C511.618,534.874 460.804,564.956 420.798,588.639 " fill="none" id="cache.Add(from, to, rate, rate.ExpirationTime)-&gt;return rate" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="411.918,593.8968,431.4828,591.6121,420.5234,588.8029,423.3325,577.8435,411.918,593.8968" style="stroke: #A80036; stroke-width: 2.0;"/><!--MD5=[07e90352c890f4afca807bce59341a6b]
link return rate to end--><path d="M356,664.5616 C356,686.5798 356,715.0434 356,735.8722 " fill="none" id="return rate-&gt;end" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="356,745.9938,364,727.9938,356,735.9938,348,727.9938,356,745.9938" style="stroke: #A80036; stroke-width: 2.0;"/><!--MD5=[99d1a6f2abfee34a739722c0d336edc8]
@startuml

(*)  - -> "(from, to)"
If "(from, to)\ncontains in cache" then
-l-> [Yes] "rate = cache.Get(from, to)"
- -> "return rate"
else 
-r-> [No] "rate = DB.Get(from, to)"
- -> "cache.Add(from, to, rate, rate.ExpirationTime)"
- -> "return rate"
Endif
- ->(*)

@enduml

PlantUML version 1.2020.03beta6(Unknown compile time)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5+10-b520.38
Operating System: Windows 10
Default Encoding: Cp1251
Language: en
Country: US
--></g></svg>